#!/bin/bash

# Update package lists
sudo apt-get update

# Install Nginx if not already installed
if ! dpkg -l | grep -q nginx; then
    sudo apt-get install -y nginx
fi

# Check if Nginx is running and listening on port 80
if ! sudo netstat -tuln | grep -q ':80 '; then
    # Configure Nginx to listen on port 80
    sudo sed -i 's/listen 80 default_server;/listen 80;/g' /etc/nginx/sites-available/default

    # Reload Nginx to apply the configuration
    sudo systemctl reload nginx
fi

# Check Nginx status
if systemctl is-active --quiet nginx; then
    echo "Nginx is running and listening on port 80."
else
    echo "Nginx is not running or not listening on port 80."
fi
